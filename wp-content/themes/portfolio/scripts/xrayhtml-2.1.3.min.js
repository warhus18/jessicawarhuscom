/*! X-rayHTML - v2.1.3 - 2016-12-20
* https://github.com/filamentgroup/x-rayhtml
* Copyright (c) 2016 Filament Group; Licensed MIT */
window.jQuery=window.jQuery||window.shoestring,function(e){function t(){s||(e(i.initSelector)[n](),s=!0)}var a=0,n="xrayhtml",i={text:{open:"View Source",close:"View Demo",titlePrefix:"Example",antipattern:"Do Not Use"},classes:{button:"btn btn-small",open:"view-source",sourcepanel:"source-panel",title:"xraytitle",antipattern:"antipattern"},initSelector:"[data-"+n+"]",defaultReveal:"inline"},r={_create:function(){return e(this).each(function(){var t=e(this).data("init."+n);return t?!1:void e(this).data("init."+n,!0)[n]("_init").trigger("create."+n)})},_init:function(){var t=e(this);t.data("id."+n,a++);var r=e(this).attr("data-"+n)||i.defaultReveal;if("flip"===r&&e(this)[n]("_createButton"),e(this).addClass(n+" method-"+r)[n]("_createSource"),e(this).is("[data-"+n+"-iframe]")){var s=e(this).find(".snippet").html(),c=e(this).attr("data-"+n+"-iframe"),d=e(this).attr("data-"+n+"-iframe-target"),o=e("<iframe src='"+c+"'/>"),l=e("head").html();o.bind("load",function(){e(window).bind("message",function(e){var a=JSON.parse(e.data||e.originalEvent.data);a.iframeid===t.data("id."+n)&&o.attr("height",a.iframeheight)}),o[0].contentWindow.postMessage({html:s,head:l,id:t.data("id."+n),selector:d},"*")}),o.addClass("xray-iframe"),e(this).find(".snippet").html("").append(o)}},_createButton:function(){var t=document.createElement("a"),a=document.createTextNode(i.text.open),n=e(this);t.setAttribute("class",i.classes.button),t.href="#",t.appendChild(a),e(t).bind("click",function(e){var a=n.attr("class").indexOf(i.classes.open)>-1;n[a?"removeClass":"addClass"](i.classes.open),t.innerHTML=a?i.text.open:i.text.close,e.preventDefault()}).insertBefore(n)},_createSource:function(){var t,a,n,r,s=this,c=function(){return s.className.match(new RegExp("\\b"+i.classes.antipattern+"\\b","gi"))?i.text.antipattern:i.text.titlePrefix},d=s.getElementsByClassName(i.classes.title),o=document.createElement("pre"),l=document.createElement("code"),p=document.createElement("div"),h=document.createElement("div");d.length?(d=d[0],d.parentNode.removeChild(d),d.innerHTML=c()+": "+d.innerHTML):(t=s.getAttribute("data-title"),d=document.createElement("div"),d.className=i.classes.title,d.innerHTML=c()+(t?": "+t:"")),a=s.innerHTML.replace(/\=\"\"/g,""),n=a.match(/(^[\s]+)/),n&&(a=a.replace(new RegExp(n[1],"gmi"),"\n")),r=document.createTextNode(a),p.setAttribute("class","snippet"),e(s).wrapInner(p),l.appendChild(r),o.appendChild(l),h.setAttribute("class",i.classes.sourcepanel),h.appendChild(o),this.appendChild(h),this.insertBefore(d,this.firstChild)}};e.fn[n]=function(t,a,i,r){return this.each(function(){return t&&"string"==typeof t?e.fn[n].prototype[t].call(this,a,i,r):e(this).data(n+"data")?e(this):(e(this).data(n+"active",!0),void e.fn[n].prototype._create.call(this))})},e.extend(e.fn[n].prototype,r);var s;e(document).bind("beforeenhance",t),e(t)}(jQuery);
